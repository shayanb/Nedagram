<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nedagram Offline - Instructions</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
      line-height: 1.6;
      color: #333;
      direction: ltr;
    }
    h1 { color: #9D7E8A; }
    h2 { margin-top: 2rem; }
    code {
      background: #f4f4f4;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-family: ui-monospace, monospace;
    }
    .warning {
      background: #fff3cd;
      border: 1px solid #ffc107;
      padding: 1rem;
      border-radius: 8px;
      margin: 1rem 0;
    }
    .success {
      background: #d4edda;
      border: 1px solid #28a745;
      padding: 1rem;
      border-radius: 8px;
      margin: 1rem 0;
    }
    .lang-switch {
      text-align: right;
      margin-bottom: 1rem;
    }
    .rtl {
      direction: rtl;
      text-align: right;
    }
    /* Command block styles */
    .command-block {
      position: relative;
      background: #f8f9fa;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      margin: 0.75rem 0;
      overflow: hidden;
    }
    .command-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0.75rem;
      background: #eee;
      border-bottom: 1px solid #e0e0e0;
      font-size: 0.85rem;
      color: #666;
    }
    .command-label {
      font-weight: 500;
    }
    .copy-btn {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.25rem 0.5rem;
      background: transparent;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 0.75rem;
      color: #666;
      cursor: pointer;
      transition: all 0.15s ease;
    }
    .copy-btn:hover {
      background: #9D7E8A;
      border-color: #9D7E8A;
      color: white;
    }
    .copy-btn.copied {
      background: #4A9E6B;
      border-color: #4A9E6B;
      color: white;
    }
    .command-code {
      display: block;
      padding: 0.75rem 1rem;
      margin: 0;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      font-size: 0.9rem;
      white-space: pre-wrap;
      word-break: break-all;
      color: #333;
      background: transparent;
    }
    .command-note {
      padding: 0.5rem 0.75rem;
      background: #fff;
      border-top: 1px solid #e0e0e0;
      font-size: 0.8rem;
      color: #777;
    }
    /* RTL adjustments for command blocks */
    .rtl .command-header {
      direction: ltr;
    }
    .rtl .command-code {
      direction: ltr;
      text-align: left;
    }
    .rtl .command-note {
      direction: rtl;
      text-align: right;
    }
  </style>
</head>
<body>
  <div class="lang-switch">
    <a href="#english">English</a> | <a href="#farsi">فارسی</a>
  </div>

  <section id="english">
    <h1>Nedagram Offline Version</h1>

    <p>This package contains everything you need to run Nedagram completely offline/locally, without any internet connection.</p>

    <div class="success">
      <strong>Good news:</strong> Once you run a local server, the app will work fully offline - including encoding and decoding audio!
    </div>

    <h2>Quick Start</h2>

    <h3>Option 1: Using Python (Easiest)</h3>
    <p>Open a terminal/command prompt <b>in this folder</b> and run one of these commands:</p>

    <div class="command-block">
      <div class="command-header">
        <span class="command-label">Python (local only)</span>
        <button class="copy-btn" onclick="copyCommand(this, 'python3 -m http.server 8000 --bind 127.0.0.1')">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" /><path d="M5 15V5a2 2 0 0 1 2-2h10" /></svg>
          Copy
        </button>
      </div>
      <code class="command-code">python3 -m http.server 8000 --bind 127.0.0.1</code>
      <div class="command-note">On Windows, use <code>python</code> instead of <code>python3</code></div>
    </div>

    <div class="command-block">
      <div class="command-header">
        <span class="command-label">Python (network access)</span>
        <button class="copy-btn" onclick="copyCommand(this, 'python3 -m http.server 8000 --bind 0.0.0.0')">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" /><path d="M5 15V5a2 2 0 0 1 2-2h10" /></svg>
          Copy
        </button>
      </div>
      <code class="command-code">python3 -m http.server 8000 --bind 0.0.0.0</code>
      <div class="command-note">Allows access from other devices on your network</div>
    </div>

    <p><strong>Important:</strong> Open <a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a> (not <code>[::]</code> or <code>localhost</code>) for microphone access to work.</p>
    <p>For other devices on your network, use your computer's IP address (e.g., <code>http://192.168.1.x:8000</code>).</p>

    <h3>Option 2: Using Node.js</h3>

    <div class="command-block">
      <div class="command-header">
        <span class="command-label">Node.js (npx)</span>
        <button class="copy-btn" onclick="copyCommand(this, 'npx serve .')">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" /><path d="M5 15V5a2 2 0 0 1 2-2h10" /></svg>
          Copy
        </button>
      </div>
      <code class="command-code">npx serve .</code>
    </div>

    <p>Or install globally: <code>npm install -g serve</code> then run <code>serve .</code></p>

    <h3>Option 3: Using PHP</h3>

    <div class="command-block">
      <div class="command-header">
        <span class="command-label">PHP</span>
        <button class="copy-btn" onclick="copyCommand(this, 'php -S localhost:8000')">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" /><path d="M5 15V5a2 2 0 0 1 2-2h10" /></svg>
          Copy
        </button>
      </div>
      <code class="command-code">php -S localhost:8000</code>
    </div>

    <div class="warning">
      <strong>Important:</strong> You must use a local web server. Opening index.html directly
      (file://) won't work because browsers block microphone access and service workers for local files.
    </div>

    <h2>What's Included</h2>
    <ul>
      <li><code>index.html</code> - Main application</li>
      <li><code>assets/</code> - JavaScript and CSS files</li>
      <li><code>sw.js</code> - Service worker for offline caching</li>
      <li><code>manifest.json</code> - PWA manifest</li>
      <li><code>icons/</code> - App icons</li>
    </ul>

    <h2>Sharing This Package</h2>
    <p>You can share this entire folder (as a zip) with others. They just need to:</p>
    <ol>
      <li>Extract the files to a folder</li>
      <li>Run a local web server (see options above)</li>
      <li>Open http://localhost:8000 in their browser</li>
    </ol>

    <hr>
    <p><a href="http://127.0.0.1:8000/">Launch Nedagram &rarr;</a></p>
  </section>

  <section id="farsi" class="rtl" style="margin-top: 4rem;">
    <h1>نداگرام - نسخه آفلاین</h1>

    <p>این بسته شامل همه چیزهایی است که برای اجرای نداگرام به صورت کاملاً آفلاین، بدون هیچ اتصال اینترنتی نیاز دارید.</p>

    <div class="success">
      <strong>خبر خوب:</strong> پس از اجرای سرور محلی، برنامه کاملاً آفلاین کار می‌کند - شامل کدگذاری و رمزگشایی صدا!
    </div>

    <h2>شروع سریع</h2>

    <h3>روش ۱: استفاده از Python (ساده‌ترین)</h3>
    <p>یک ترمینال <b>در این پوشه</b> باز کنید و یکی از این دستورات را اجرا کنید:</p>

    <div class="command-block">
      <div class="command-header">
        <span class="command-label">Python (فقط محلی)</span>
        <button class="copy-btn" onclick="copyCommand(this, 'python3 -m http.server 8000 --bind 127.0.0.1')">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" /><path d="M5 15V5a2 2 0 0 1 2-2h10" /></svg>
          کپی
        </button>
      </div>
      <code class="command-code">python3 -m http.server 8000 --bind 127.0.0.1</code>
      <div class="command-note">در ویندوز از <code>python</code> به جای <code>python3</code> استفاده کنید</div>
    </div>

    <div class="command-block">
      <div class="command-header">
        <span class="command-label">Python (دسترسی شبکه)</span>
        <button class="copy-btn" onclick="copyCommand(this, 'python3 -m http.server 8000 --bind 0.0.0.0')">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" /><path d="M5 15V5a2 2 0 0 1 2-2h10" /></svg>
          کپی
        </button>
      </div>
      <code class="command-code">python3 -m http.server 8000 --bind 0.0.0.0</code>
      <div class="command-note">اجازه دسترسی از دستگاه‌های دیگر در شبکه شما</div>
    </div>

    <p><strong>مهم:</strong> آدرس <a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a> را باز کنید (نه <code>[::]</code> یا <code>localhost</code>) تا دسترسی میکروفون کار کند.</p>
    <p>برای دستگاه‌های دیگر در شبکه، از آدرس IP کامپیوتر استفاده کنید (مثلاً <code>http://192.168.1.x:8000</code>).</p>

    <h3>روش ۲: استفاده از Node.js</h3>

    <div class="command-block">
      <div class="command-header">
        <span class="command-label">Node.js (npx)</span>
        <button class="copy-btn" onclick="copyCommand(this, 'npx serve .')">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" /><path d="M5 15V5a2 2 0 0 1 2-2h10" /></svg>
          کپی
        </button>
      </div>
      <code class="command-code">npx serve .</code>
    </div>

    <h3>روش ۳: استفاده از PHP</h3>

    <div class="command-block">
      <div class="command-header">
        <span class="command-label">PHP</span>
        <button class="copy-btn" onclick="copyCommand(this, 'php -S localhost:8000')">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" /><path d="M5 15V5a2 2 0 0 1 2-2h10" /></svg>
          کپی
        </button>
      </div>
      <code class="command-code">php -S localhost:8000</code>
    </div>

    <div class="warning">
      <strong>مهم:</strong> باید از یک سرور وب محلی استفاده کنید. باز کردن مستقیم index.html
      (file://) کار نمی‌کند چون مرورگرها دسترسی میکروفون را برای فایل‌های محلی مسدود می‌کنند.
    </div>

    <h2>اشتراک‌گذاری این بسته</h2>
    <p>می‌توانید این پوشه را (به صورت zip) با دیگران به اشتراک بگذارید. آن‌ها فقط باید:</p>
    <ol>
      <li>فایل‌ها را در یک پوشه استخراج کنند</li>
      <li>یک سرور وب محلی اجرا کنند</li>
      <li>http://localhost:8000 را در مرورگر باز کنند</li>
    </ol>

    <hr>
    <p><a href="http://127.0.0.1:8000/">&larr; اجرای نداگرام</a></p>
  </section>

  <script>
    function copyCommand(btn, command) {
      navigator.clipboard.writeText(command).then(() => {
        const originalText = btn.innerHTML;
        btn.classList.add('copied');
        btn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12" /></svg> Copied!';
        setTimeout(() => {
          btn.classList.remove('copied');
          btn.innerHTML = originalText;
        }, 2000);
      }).catch(() => {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = command;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        btn.classList.add('copied');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12" /></svg> Copied!';
        setTimeout(() => {
          btn.classList.remove('copied');
          btn.innerHTML = originalText;
        }, 2000);
      });
    }
  </script>
</body>
</html>
